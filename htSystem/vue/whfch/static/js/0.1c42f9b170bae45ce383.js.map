{"version":3,"sources":["webpack:///src/components/layout/page/Login.vue","webpack:///./src/components/layout/page/Login.vue?119b","webpack:///./src/components/layout/page/Login.vue"],"names":["Login","name","data","form","userName","passWord","fullscreenLoading","rules","required","message","trigger","flag","methods","onSubmit","formName","_this","this","$refs","validate","valid","loading","$loading","lock","text","spinner","background","$http","post","api","login","then","res","code","$store","dispatch","sessionStorage","setItem","body","token","stringify_default","user","$message","success","indexPath","state","tabRouter","indexTab","console","log","$router","push","catch","type","close","page_Login","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","model","label-width","_v","label","prop","placeholder","value","callback","$$v","$set","expression","show-password","nativeOn","keyup","$event","indexOf","_k","keyCode","key","on","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"qJAqBAA,GACAC,KAAA,QAEAC,KAHA,WAIA,OACAC,MACAC,SAAA,QACAC,SAAA,WACAC,mBAAA,GAIAC,OACAH,WACAI,UAAA,EAAAC,QAAA,SAAAC,QAAA,SAEAL,WACAG,UAAA,EAAAC,QAAA,SAAAC,QAAA,UAIAC,KAAA,IAIAC,SACAC,SADA,SACAC,GAAA,IAAAC,EAAAC,KAGAA,KAAAC,MAAAH,GAAAI,SAAA,SAAAC,GACA,GAAAA,EAAA,CAGA,IAAAC,EAAAL,EAAAM,UACAC,MAAA,EACAC,KAAA,UACAC,QAAA,kBACAC,WAAA,uBAGAV,EAAAW,MAAAC,KAAAZ,EAAAa,IAAAC,MAAAd,EAAAZ,MAAA2B,KAAA,SAAAC,GACA,UAAAA,EAAA7B,KAAA8B,KAAA,CAIAjB,EAAAkB,OAAAC,SAAA,2BAGAC,eAAAC,QAAA,eACAD,eAAAC,QAAA,QAAAL,EAAA7B,KAAAmC,KAAAC,OACAH,eAAAC,QAAA,OAAAG,IAAAR,EAAA7B,KAAAmC,KAAAG,OAGAzB,EAAA0B,SAAAC,QAAA,QAEA,IAAAC,EAAA5B,EAAAkB,OAAAW,MAAAC,UAAAC,SACAC,QAAAC,IAAAL,GACA,mBAAAA,EACA5B,EAAAkC,QAAAC,KAAAP,GAAAQ,MAAA,cAEApC,EAAAkC,QAAAC,KAAA,mBAAAC,MAAA,kBAIA,QAAApB,EAAA7B,KAAA8B,OACAjB,EAAAJ,KAAA,GACAI,EAAAJ,OAEAI,EAAA0B,UACAhC,QAAA,iBACA2C,KAAA,WAIA,QAAArB,EAAA7B,KAAA8B,MACAjB,EAAA0B,UACAhC,QAAA,OACA2C,KAAA,UAOAhC,EAAAiC,UAEAF,MAAA,WACA/B,EAAAiC,gBCzGeC,GADEC,OAFjB,WAA0B,IAAAC,EAAAxC,KAAayC,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,eAAyBF,EAAA,WAAgBG,IAAA,YAAAD,YAAA,YAAAE,OAA+CC,MAAAR,EAAArD,KAAAI,MAAAiD,EAAAjD,MAAA0D,cAAA,UAAyDN,EAAA,MAAWE,YAAA,gBAA0BL,EAAAU,GAAA,UAAAV,EAAAU,GAAA,KAAAP,EAAA,gBAAkDI,OAAOI,MAAA,QAAAC,KAAA,cAAmCT,EAAA,YAAiBI,OAAOX,KAAA,OAAAiB,YAAA,SAAoCL,OAAQM,MAAAd,EAAArD,KAAA,SAAAoE,SAAA,SAAAC,GAAmDhB,EAAAiB,KAAAjB,EAAArD,KAAA,WAAAqE,IAAoCE,WAAA,oBAA6B,GAAAlB,EAAAU,GAAA,KAAAP,EAAA,gBAAqCI,OAAOI,MAAA,QAAAC,KAAA,cAAmCT,EAAA,YAAiBI,OAAOY,gBAAA,GAAAN,YAAA,SAAyCO,UAAWC,MAAA,SAAAC,GAAyB,OAAAA,EAAA1B,KAAA2B,QAAA,QAAAvB,EAAAwB,GAAAF,EAAAG,QAAA,WAAAH,EAAAI,IAAA,SAAsF,KAAe1B,EAAA3C,SAAA,eAAkCmD,OAAQM,MAAAd,EAAArD,KAAA,SAAAoE,SAAA,SAAAC,GAAmDhB,EAAAiB,KAAAjB,EAAArD,KAAA,WAAAqE,IAAoCE,WAAA,oBAA6B,GAAAlB,EAAAU,GAAA,KAAAP,EAAA,gBAAAA,EAAA,aAAqDI,OAAOX,KAAA,WAAiB+B,IAAKC,MAAA,SAAAN,GAAyB,OAAAtB,EAAA3C,SAAA,iBAAmC2C,EAAAU,GAAA,qBAExmCmB,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACExF,EACAsD,GATF,EAVA,SAAAmC,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/0.1c42f9b170bae45ce383.js","sourcesContent":["<template>\r\n  <div  class=\"login-body\">\r\n    <el-form ref=\"loginForm\" :model=\"form\" :rules=\"rules\" label-width=\"80px\" class=\"login-box\">\r\n      <h3 class=\"login-title\">欢迎登录</h3>\r\n      <el-form-item label=\"账号ccc\" prop=\"userName\">\r\n        <el-input type=\"text\" placeholder=\"请输入账号\" v-model=\"form.userName\"/>\r\n      </el-form-item>\r\n      <el-form-item label=\"密码ccc\" prop=\"passWord\">\r\n        <el-input  show-password placeholder=\"请输入密码\" v-model=\"form.passWord\" @keyup.enter.native=\"onSubmit('loginForm')\"/>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"onSubmit('loginForm')\" >登录</el-button>\r\n      </el-form-item>\r\n\r\n    </el-form>\r\n\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"Login\",\r\n\r\n    data() {\r\n      return {\r\n        form: {\r\n          userName: 'whfch',\r\n          passWord: 'whfch123',\r\n          fullscreenLoading:false\r\n        },\r\n\r\n        // 表单验证，需要在 el-form-item 元素中增加 prop 属性\r\n        rules: {\r\n          userName: [\r\n            {required: true, message: '账号不可为空', trigger: 'blur'}\r\n          ],\r\n          passWord: [\r\n            {required: true, message: '密码不可为空', trigger: 'blur'}\r\n          ]\r\n        },\r\n\r\n        flag:1,\r\n      }\r\n    },\r\n\r\n    methods: {\r\n      onSubmit(formName) {\r\n        \r\n        // 为表单绑定验证功能\r\n        this.$refs[formName].validate((valid) => {\r\n          if (valid) {\r\n            // 使用 vue-router 路由到指定页面，该方式称之为编程式导航\r\n        //开启loading\r\n        const loading = this.$loading({\r\n          lock: true,\r\n          text: 'Loading',\r\n          spinner: 'el-icon-loading',\r\n          background: 'rgba(0, 0, 0, 0.7)'\r\n        });\r\n\r\n            this.$http.post(this.api.login,this.form).then(res=>{\r\n              if (res.data.code == '200') {\r\n\r\n                \r\n                //更新登录状态,true为第一次登录。\r\n                this.$store.dispatch('changeLoginStatusFun',true);\r\n\r\n                //防止多次弹出框，记录初始值\r\n                sessionStorage.setItem(\"morePOp\", \"1\");\r\n                sessionStorage.setItem(\"Token\", res.data.body.token);\r\n                sessionStorage.setItem(\"User\", JSON.stringify(res.data.body.user));\r\n\r\n                //更新头像\r\n                this.$message.success(\"登入成功\");\r\n\r\n                let indexPath = this.$store.state.tabRouter.indexTab;\r\n                console.log(indexPath);\r\n                if(indexPath != \"/page/Dashboard\"){\r\n                    this.$router.push(indexPath).catch(()=>{});\r\n                }else{\r\n                  this.$router.push(\"/page/Dashboard\").catch(()=>{});\r\n                }\r\n                \r\n              }else{\r\n                if (res.data.code === \"410\") {\r\n                    if(this.flag<3){\r\n                      this.flag++;\r\n                    }\r\n                    this.$message({\r\n                      message: \"登陆失败，账号或密码错误!!\",\r\n                      type: \"error\"\r\n                    }); \r\n                }\r\n\r\n                if (res.data.code === \"500\") {\r\n                  this.$message({\r\n                    message: \"登陆失败\",\r\n                    type: \"error\"\r\n                  });\r\n                  \r\n                }\r\n\r\n              }\r\n\r\n            loading.close();\r\n              // this.fullscreenLoading=false;\r\n            }).catch(() => {\r\n                loading.close();\r\n              });\r\n          } \r\n\r\n        });\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .login-box {\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    margin-top: -200px;\r\n    margin-left: -175px;\r\n    padding: 35px 35px 15px 35px;\r\n    border: 1px solid #DCDFE6;\r\n    width: 350px;\r\n    border-radius: 5px;\r\n    -webkit-border-radius: 5px;\r\n    -moz-border-radius: 5px;\r\n    box-shadow: 0 0 25px #909399;\r\n    background-color: #ffffff;\r\n    opacity:0.7;\r\n  }\r\n  .login-body{\r\n    width: 100%;\r\n    height: 100%;\r\n    position: relative;\r\n    background-size:100% 100%;\r\n  }\r\n\r\n  .login-title {\r\n    text-align: center;\r\n    margin: 0 auto 40px auto;\r\n    color: #303133;\r\n  }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/layout/page/Login.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login-body\"},[_c('el-form',{ref:\"loginForm\",staticClass:\"login-box\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-width\":\"80px\"}},[_c('h3',{staticClass:\"login-title\"},[_vm._v(\"欢迎登录\")]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"账号ccc\",\"prop\":\"userName\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"请输入账号\"},model:{value:(_vm.form.userName),callback:function ($$v) {_vm.$set(_vm.form, \"userName\", $$v)},expression:\"form.userName\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"密码ccc\",\"prop\":\"passWord\"}},[_c('el-input',{attrs:{\"show-password\":\"\",\"placeholder\":\"请输入密码\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.onSubmit('loginForm')}},model:{value:(_vm.form.passWord),callback:function ($$v) {_vm.$set(_vm.form, \"passWord\", $$v)},expression:\"form.passWord\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.onSubmit('loginForm')}}},[_vm._v(\"登录\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-29bd54d7\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/layout/page/Login.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-29bd54d7\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./Login.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Login.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Login.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-29bd54d7\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./Login.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-29bd54d7\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/layout/page/Login.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}